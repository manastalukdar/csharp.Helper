name: build-test
on: [push]
jobs:
  build:
    name: solution
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        os: [windows-latest]
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-dotnet@v1
        with:
          dotnet-version: '6.0'
          include-prerelease: True
      - run: dotnet --version
      - run: dotnet --info
      - run: dotnet --list-sdks
      - name: Add msbuild to PATH
        uses: microsoft/setup-msbuild@v1.0.2
        with:
          vs-version: '[16.9, 16.10)'
      - name: Setup NuGet
        uses: NuGet/setup-nuget@v1
      # - name: Restore NuGet Packages
      #   run: nuget restore helpsharp.sln
      - name: Set dotnet sdk version
        env:
            DOTNETVER: dotnet --version
        run: echo "${DOTNETVER}"
      - run: set MSBuildSDKsPath="C:\Users\runneradmin\AppData\Local\Microsoft\dotnet\sdk\$(dotnet --version)\Sdks"
      - run: set MSBuildSDKsPath="C:\Users\runneradmin\AppData\Local\Microsoft\dotnet\sdk\${DOTNETVER}\Sdks"
      - run: dotnet nuget locals all -c
      - name: Build
        run: msbuild helpsharp.sln /p:Configuration=Release
